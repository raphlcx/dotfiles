#!/usr/bin/env bash

# Full path of script
CWD="$(dirname "$(realpath "$0")")"
readonly CWD

# Commands
_log() {
  echo "$1"
}

_create() {
  mkdir -p "$1"
}

_link() {
  ln -sfn "$1" "$2"
}

# Start setup
_log 'Setting up dotfiles ...'

_log '  bash'
_link "$CWD/bash/bashrc" "$HOME/.bashrc"
_link "$CWD/bash/bash_profile" "$HOME/.bash_profile"

_log '  bash completions'
_create "$HOME/.local/share/bash-completion"
_link "$CWD/bash/completions" "$HOME/.local/share/bash-completion/completions"

_log '  bin directory'
_create "$HOME/.local"
_link "$CWD/bin" "$HOME/.local/bin"

_log '  fontconfig'
_create "$HOME/.config/fontconfig"
_link "$CWD/fontconfig/fonts.conf" "$HOME/.config/fontconfig/fonts.conf"

_log '  git'
_create "$HOME/.config/git"
_link "$CWD/git/config" "$HOME/.config/git/config"
_link "$CWD/git/ignore" "$HOME/.config/git/ignore"

_log '  gnupg'
_create "$HOME/.gnupg"
_link "$CWD/gnupg/gpg.conf" "$HOME/.gnupg/gpg.conf"

_log '  gnupg gpg-agent'
_create "$HOME/.gnupg"
_link "$CWD/gnupg/gpg-agent.conf" "$HOME/.gnupg/gpg-agent.conf"

_log '  mpv'
_create "$HOME/.config/mpv"
_link "$CWD/mpv/mpv.conf" "$HOME/.config/mpv/mpv.conf"

_log '  mutt'
_create "$HOME/.mutt"
_create "$HOME/.cache/mutt"
_link "$CWD/mutt/muttrc" "$HOME/.mutt/muttrc"

_log '  newsboat'
_create "$HOME/.config/newsboat"
_link "$CWD/newsboat/urls" "$HOME/.config/newsboat/urls"
_link "$CWD/newsboat/config" "$HOME/.config/newsboat/config"

_log '  pacman'
_create "$HOME/.config/pacman"
_link "$CWD/pacman/makepkg.conf" "$HOME/.config/pacman/makepkg.conf"

_log '  readline'
_link "$CWD/readline/inputrc" "$HOME/.inputrc"

_log '  ruby'
_link "$CWD/ruby/gemrc" "$HOME/.gemrc"
_link "$CWD/ruby/irbrc" "$HOME/.irbrc"

_log '  ruby bundler'
_create "$HOME/.bundle"
_link "$CWD/ruby/bundler-config" "$HOME/.bundle/config"

_log '  ssh'
_create "$HOME/.ssh"
_link "$CWD/ssh/config" "$HOME/.ssh/config"

_log '  sway'
_create "$HOME/.config/sway"
_link "$CWD/sway/sway-config" "$HOME/.config/sway/config"

_log '  sway i3status'
_create "$HOME/.config/i3status"
_link "$CWD/sway/i3status-config" "$HOME/.config/i3status/config"

_log '  systemd'
_create "$HOME/.config/systemd"
_link "$CWD/systemd/user" "$HOME/.config/systemd/user"

_log '  tmux'
_link "$CWD/tmux/tmux.conf" "$HOME/.tmux.conf"

_log '  vim'
_link "$CWD/vim/vimrc" "$HOME/.vimrc"

_log '  x'
_link "$CWD/x/Xresources" "$HOME/.Xdefaults"

_log 'Done.'
