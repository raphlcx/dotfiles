#!/usr/bin/env bash

# System upgrade script

echo ""
echo "======================================"
echo "   System upgrade"
echo "======================================"
echo ""

sudo -s -- <<EOF
pacman -Syyu --noconfirm
pacman -Sc --noconfirm
EOF

echo ""
echo "======================================"
echo "   AUR repositories"
echo "======================================"
echo ""

if [ "$(ls -A "$HOME/.aur")" ]; then
  for dir in "$HOME/.aur/"*; do
    echo "Cleaning and checking $(basename "$dir")..."
    git -C "$dir" checkout .
    git -C "$dir" clean -qf
    git -C "$dir" pull
  done
else
  echo "No AUR repositories to be updated."
fi

echo ""
echo "======================================"
echo "   vim plugins"
echo "======================================"
echo ""

git -C "$HOME/.local/share/vim/pack/plugins" submodule foreach git pull
